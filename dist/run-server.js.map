{"version":3,"sources":["../src/run-server.js"],"names":["runServer","options","app","get","req","res","send","url","gatewayOptions","mode","logger"],"mappings":";;;;;;;AACA;;AAEA;;AAGA;;AACA;;;;;;;;;;AAEA;;;AAGO,MAAMA,SAAS,GAAIC,OAAD,IAAyC;AAC9D;AACA;AACA;AACA,QAAMC,GAAG,GAAG,wBAA+CC,GAA/C,CACR,IADQ,EAER,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAChBA,IAAAA,GAAG,CAACC,IAAJ,CAAU,6BAA4BF,GAAG,CAACG,GAAI,EAA9C;AACH,GAJO,CAAZ,CAJ8D,CAW9D;;AACA,QAAMC,cAA8B;AAChCC,IAAAA,IAAI,EAAE,qCAD0B;AAEhCC,IAAAA,MAAM,EAAE;AAFwB,KAG7BT,OAH6B,CAApC;;AAKA,2BAAkDO,cAAlD,EAAkEN,GAAlE;AACH,CAlBM","sourcesContent":["// @flow\nimport express from \"express\";\nimport type {$Request, $Response} from \"express\";\nimport {startGateway} from \"./shared/index.js\";\nimport type {RenderGatewayOptions} from \"./types.js\";\nimport type {GatewayOptions, RequestWithLog} from \"./shared/index.js\";\nimport {getLogger} from \"./ka-shared/index.js\";\nimport {getRuntimeMode} from \"./ka-shared/get-runtime-mode.js\";\n\n/**\n * Run the render-gateway server using the provided options.\n */\nexport const runServer = (options: RenderGatewayOptions): void => {\n    // TODO: Do a real server.\n    //   For now, we just handle all gets and return a response that is the\n    //   url that was requested.\n    const app = express<RequestWithLog<$Request>, $Response>().get(\n        \"/*\",\n        async (req, res) => {\n            res.send(`The URL you requested was ${req.url}`);\n        },\n    );\n\n    // Start the gateway.\n    const gatewayOptions: GatewayOptions = {\n        mode: getRuntimeMode(),\n        logger: getLogger(),\n        ...options,\n    };\n    startGateway<RequestWithLog<$Request>, $Response>(gatewayOptions, app);\n};\n"],"file":"run-server.js"}