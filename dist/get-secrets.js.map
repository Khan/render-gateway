{"version":3,"file":"get-secrets.js","names":["_wonderStuffServer","require","_readFile","getSecrets","cryptoKeyPath","encryptedSecretsBuffer","readFile","decrypedSecretsBuffer","decryptBufferWithKms","JSON","parse","toString","exports"],"sources":["../src/get-secrets.js"],"sourcesContent":["// @flow\nimport {decryptBufferWithKms} from \"@khanacademy/wonder-stuff-server\";\nimport type {Secrets} from \"@khanacademy/wonder-stuff-core\";\nimport {readFile} from \"./read-file.js\";\n\n/**\n * Get the secrets table for the service.\n */\nexport const getSecrets = async (cryptoKeyPath: string): Promise<Secrets> => {\n    const encryptedSecretsBuffer = await readFile(\"./secrets.json.enc\");\n    const decrypedSecretsBuffer = await decryptBufferWithKms(\n        cryptoKeyPath,\n        encryptedSecretsBuffer,\n    );\n    return JSON.parse(decrypedSecretsBuffer.toString());\n};\n"],"mappings":";;;;;;AACA,IAAAA,kBAAA,GAAAC,OAAA;AAEA,IAAAC,SAAA,GAAAD,OAAA;AAEA;AACA;AACA;AACO,MAAME,UAAU,GAAG,MAAOC,aAAqB,IAAuB;EACzE,MAAMC,sBAAsB,GAAG,MAAM,IAAAC,kBAAQ,EAAC,oBAAoB,CAAC;EACnE,MAAMC,qBAAqB,GAAG,MAAM,IAAAC,uCAAoB,EACpDJ,aAAa,EACbC,sBAAsB,CACzB;EACD,OAAOI,IAAI,CAACC,KAAK,CAACH,qBAAqB,CAACI,QAAQ,EAAE,CAAC;AACvD,CAAC;AAACC,OAAA,CAAAT,UAAA,GAAAA,UAAA"}